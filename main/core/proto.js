// Generated by CoffeeScript 1.7.1

/*
  autor Volosincu Bogdan
 */
(function(context, factory) {
  if (typeof define === 'function' && define.amd) {
    define(['exports'], function(exports) {
      context.Proto = factory(context, exports);
      return context.Proto;
    });
  } else if (typeof exports !== 'undefined') {
    factory(context, exports);
  } else {
    context.Proto = factory(context, {});
  }
})(this, function(context, Proto) {
  Proto = (function() {
    var callbacks_attached, callbacks_on, isFunction;

    callbacks_attached = {};

    callbacks_on = {};

    isFunction = function(o) {
      return typeof o === 'function';
    };

    function Proto(object) {
      var key, value;
      for (key in object) {
        value = object[key];
        if (isFunction(value)) {
          Proto.prototype[key] = function() {
            var i, k, _i, _len, _ref;
            _ref = callbacks_attached[key];
            for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
              k = _ref[i];
              if (k !== void 0) {
                k.apply(Proto.prototype, i === 0 ? arguments : void 0);
              }
            }
          };
          callbacks_attached[key] = [value];
          callbacks_on[key] = {};
        } else {
          Proto.prototype[key] = value;
        }
      }
    }

    Proto.prototype.attach = function(prop, priority, fn) {
      if (arguments[2] === void 0) {
        fn = priority;
        priority = callbacks_attached[prop].length++;
      }
      if (callbacks_attached[prop][priority] === void 0 || callbacks_attached[prop][priority] === null) {
        callbacks_attached[prop][priority] = fn;
      } else {
        Array.prototype.splice.call(callbacks_attached[prop], priority, 0, fn);
      }
    };

    Proto.prototype.on = function(prop_name, cbk_name, cbk) {
      callbacks_on[prop_name][cbk_name] = cbk;
    };

    Proto.prototype.trigger = function(prop_name, cbk_name) {
      callbacks_on[prop_name][cbk_name].call(null);
    };

    return Proto;

  })();
  return Proto;
});
